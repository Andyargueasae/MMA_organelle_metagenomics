Config file /home/student.unimelb.edu.au/yuhtong/andy/data/MMA_organelle_metagenomics/binny/config/config.default.yaml is extended by additional config specified via the command line.
Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 16
Rules claiming more threads will be scaled down.
Job stats:
job                          count    min threads    max threads
-------------------------  -------  -------------  -------------
ALL                              1              1              1
annotate                         1             16             16
binny                            1             16             16
call_contig_depth                1              1              1
format_assembly                  1              1              1
mantis_checkm_marker_sets        1             16             16
merge_contig_depths              1              1              1
prepare_input_data               1              1              1
total                            8              1             16

Select jobs to execute...

[Wed Aug 23 18:42:58 2023]
Job 5: Preparing input.
Reason: Missing output files: /data/MMA_organelle_metagenomics/binny_output/intermediary/reads_sample_000001_sorted.bam, /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly.fa

[Wed Aug 23 18:43:00 2023]
Finished job 5.
1 of 8 steps (12%) done
Select jobs to execute...

[Wed Aug 23 18:43:00 2023]
Job 4: Preparing assembly.
Reason: Missing output files: /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly.formatted.fa; Input files updated by another job: /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly.fa

Activating conda environment: ../../../home/student.unimelb.edu.au/yuhtong/andy/data/MMA_organelle_metagenomics/binny/conda/456737a4a59aae879f89e475a126b59c_
[Wed Aug 23 18:43:00 2023]
Finished job 4.
2 of 8 steps (25%) done
Select jobs to execute...

[Wed Aug 23 18:43:00 2023]
Job 6: annotate: Running prokkaP.
Reason: Missing output files: /data/MMA_organelle_metagenomics/binny_output/intermediary/annotation.filt.gff, /data/MMA_organelle_metagenomics/binny_output/intermediary/prokka.faa; Input files updated by another job: /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly.formatted.fa

Activating conda environment: ../../../home/student.unimelb.edu.au/yuhtong/andy/data/MMA_organelle_metagenomics/binny/conda/c4bfcfb48c3bf73b7c4923abbc88c1af_
[Wed Aug 23 18:43:04 2023]
Finished job 6.
3 of 8 steps (38%) done
Select jobs to execute...

[Wed Aug 23 18:43:04 2023]
Job 7: MANTIS: Running MANTIS with CheckM marker sets.
Reason: Missing output files: /data/MMA_organelle_metagenomics/binny_output/intermediary/mantis_out/consensus_annotation.tsv; Input files updated by another job: /data/MMA_organelle_metagenomics/binny_output/intermediary/prokka.faa

Activating conda environment: ../../../home/student.unimelb.edu.au/yuhtong/andy/data/MMA_organelle_metagenomics/binny/conda/bfacb96a95d64de49bbe1bc9d7e40abd_
[Wed Aug 23 18:43:08 2023]
Finished job 7.
4 of 8 steps (50%) done
Select jobs to execute...

[Wed Aug 23 18:43:08 2023]
Job 3: /data/MMA_organelle_metagenomics/binny_output/call_contig_depth: Getting data on assembly coverage with mg reads.
Reason: Missing output files: /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly_contig_depth_sorted.origout.txt; Input files updated by another job: /data/MMA_organelle_metagenomics/binny_output/intermediary/reads_sample_000001_sorted.bam, /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly.formatted.fa

Activating conda environment: ../../../home/student.unimelb.edu.au/yuhtong/andy/data/MMA_organelle_metagenomics/binny/conda/3f3b4b34a2fec09e70e138ac4f360772_
Terminating processes on user request, this might take some time.
[Wed Aug 23 18:43:09 2023]
Error in rule call_contig_depth:
    jobid: 3
    output: /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly_contig_depth_sorted.origout.txt
    log: /data/MMA_organelle_metagenomics/binny_output/logs/analysis_call_contig_depth_sorted.origout.log (check log file(s) for error message)
    conda-env: /home/student.unimelb.edu.au/yuhtong/andy/data/MMA_organelle_metagenomics/binny/conda/3f3b4b34a2fec09e70e138ac4f360772_
    shell:
        
            echo "Running BEDTools for average depth in each position" >> /data/MMA_organelle_metagenomics/binny_output/logs/analysis_call_contig_depth_sorted.origout.log
            export TMPDIR=/data/MMA_organelle_metagenomics/binny_output/tmp
            TMP_DEPTH=$(mktemp --tmpdir=/data/MMA_organelle_metagenomics/binny_output/tmp "depth_file_XXXXXXXXXXXXXXXX.txt")
            genomeCoverageBed -ibam /data/MMA_organelle_metagenomics/binny_output/intermediary/reads_sample_000001_sorted.bam | grep -v "genome" > $TMP_DEPTH
            echo "Depth calculation done" >> /data/MMA_organelle_metagenomics/binny_output/logs/analysis_call_contig_depth_sorted.origout.log

            ## This method of depth calculation was adapted and modified from the CONCOCT code
            echo "Getting average contig depth." >> /data/MMA_organelle_metagenomics/binny_output/logs/analysis_call_contig_depth_sorted.origout.log
            perl /home/student.unimelb.edu.au/yuhtong/andy/data/MMA_organelle_metagenomics/binny/workflow/scripts/calcAvgCoverage.pl $TMP_DEPTH /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly.formatted.fa > /data/MMA_organelle_metagenomics/binny_output/intermediary/assembly_contig_depth_sorted.origout.txt &&             echo "Done. Removing the temporary file" >> /data/MMA_organelle_metagenomics/binny_output/logs/analysis_call_contig_depth_sorted.origout.log 
            rm $TMP_DEPTH
            
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Complete log: ../.snakemake/log/2023-08-23T184255.776977.snakemake.log
